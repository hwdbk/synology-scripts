# Encrypted multi-disk backup

Simple scripts to generate an index for and copy files to a multi-disk backup disk set. The files are copied to an encrypted file system on the external disk (using eCryptfs) to prevent misuse in case the disk falls into the wrong hands or is disposed of at some point in time.

- `backup_diskset_generate` generates a (multi-disk) index/todo list of files to copy. The target disk size is 3TB and fixed (making that flexible would be the first obvious thing to do in extending this script but I didn't get round that yet) but can be changed in the script (the size, that is, not the flexibility of it). Multiple input paths can be specified that will be used for sourcing the files and the script will 'cut' the list into chunks that will (just) fit one disk, and then move on to the next disk. The backup disk set is named after the date (e.g. 20200605); disks are numbered 001, 002 etc. Skipping to the next disk can be forced by using the keyword '`newdisk`' in the input paths.

- `backup_diskset_copy` copies the files as specified by the generated index/todo list to the external disk. The destination path for the files is set in the script to /volumeSATA1/satashare1-1 (which is an external disk connected to the 1st eSATA connector on the Synology NAS), but this can be changed if your backup disks are elsewhere. Options: `mountonly` - will only create and/or mount the eCryptfs file system ; `dryrun` - will only display what will happen ; `nomd5` - will not checksum the copied files.

- `backup_diskset_rename` renames an existing backup disk (or rather the directory on it) to a new backup disk set name. This is useful to make incremental backups and allows existing files to be reused (not rewritten again) after some time if they are already on the backup disk (and haven't changed).
